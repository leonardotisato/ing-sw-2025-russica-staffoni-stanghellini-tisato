<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.Group?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.text.Text?>

<StackPane fx:id="root" prefHeight="400.0" prefWidth="600.0" xmlns="http://javafx.com/javafx/23.0.1"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="it.polimi.ingsw.cg04.client.view.gui.controllers.BuildSceneController">
    <Group fx:id="scalableGroup">
        <AnchorPane fx:id="buildScene" prefHeight="400.0" prefWidth="600.0">
            <Pane layoutX="-1.0" layoutY="110.0" prefHeight="291.0" prefWidth="374.0">
                <ImageView fx:id="shipImage" fitHeight="270.0" fitWidth="476.0" layoutX="-1.0"
                           layoutY="21.0" pickOnBounds="true" preserveRatio="true">
                </ImageView>
                <GridPane fx:id="shipGrid" layoutX="13.0" layoutY="30.5" prefHeight="250.0"
                          prefWidth="347.0">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                    </rowConstraints>

                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="0"
                               GridPane.rowIndex="0">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="1"
                               GridPane.rowIndex="0">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="2"
                               GridPane.rowIndex="0">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="3"
                               GridPane.rowIndex="0">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="4"
                               GridPane.rowIndex="0">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="5"
                               GridPane.rowIndex="0">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="6"
                               GridPane.rowIndex="0">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>

                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="0"
                               GridPane.rowIndex="1">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="1"
                               GridPane.rowIndex="1">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="2"
                               GridPane.rowIndex="1">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="3"
                               GridPane.rowIndex="1">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="4"
                               GridPane.rowIndex="1">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="5"
                               GridPane.rowIndex="1">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="6"
                               GridPane.rowIndex="1">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>

                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="0"
                               GridPane.rowIndex="2">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="1"
                               GridPane.rowIndex="2">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="2"
                               GridPane.rowIndex="2">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="3"
                               GridPane.rowIndex="2">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="4"
                               GridPane.rowIndex="2">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="5"
                               GridPane.rowIndex="2">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="6"
                               GridPane.rowIndex="2">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>

                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="0"
                               GridPane.rowIndex="3">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="1"
                               GridPane.rowIndex="3">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="2"
                               GridPane.rowIndex="3">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="3"
                               GridPane.rowIndex="3">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="4"
                               GridPane.rowIndex="3">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="5"
                               GridPane.rowIndex="3">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="6"
                               GridPane.rowIndex="3">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>

                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="0"
                               GridPane.rowIndex="4">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="1"
                               GridPane.rowIndex="4">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="2"
                               GridPane.rowIndex="4">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="3"
                               GridPane.rowIndex="4">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="4"
                               GridPane.rowIndex="4">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="5"
                               GridPane.rowIndex="4">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>
                    <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="6"
                               GridPane.rowIndex="4">
                        <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                                   preserveRatio="true"/>
                    </StackPane>

                </GridPane>
            </Pane>
            <GridPane fx:id="bufferGrid" layoutX="263.0" layoutY="138.0" prefHeight="51.0" prefWidth="99.0">
                <columnConstraints>
                    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                </columnConstraints>
                <rowConstraints>
                    <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                </rowConstraints>
                <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="0"
                           GridPane.rowIndex="0">
                    <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                               preserveRatio="true"/>
                </StackPane>
                <StackPane prefHeight="51.0" prefWidth="49.0" GridPane.columnIndex="1"
                           GridPane.rowIndex="0">
                    <ImageView fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                               preserveRatio="true"/>
                </StackPane>
            </GridPane>
            <Pane layoutY="1.0" prefHeight="130.0" prefWidth="370.0">
                <Rectangle arcHeight="5.0" arcWidth="5.0" fill="rgba(0, 0, 0, 0.5)" height="124.0"
                           layoutX="4.0" layoutY="4.0" stroke="YELLOW" strokeType="INSIDE"
                           width="111.0"/>
                <Rectangle arcHeight="5.0" arcWidth="5.0" fill="rgba(0, 0, 0, 0.5)" height="124.0"
                           layoutX="118.0" layoutY="4.0" stroke="YELLOW" strokeType="INSIDE"
                           width="252.0"/>
                <GridPane fx:id="faceUpGrid" layoutX="139.0" layoutY="25.0" prefHeight="55.0"
                          prefWidth="213.0">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                    </rowConstraints>
                    <ImageView fx:id="faceUp1" fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                               preserveRatio="true" GridPane.columnIndex="0">
                    </ImageView>
                    <ImageView fx:id="faceUp2" fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                               preserveRatio="true" GridPane.columnIndex="1"/>
                    <ImageView fx:id="faceUp3" fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                               preserveRatio="true" GridPane.columnIndex="2"/>
                    <ImageView fx:id="faceUp4" fitHeight="51.0" fitWidth="49.0" pickOnBounds="true"
                               preserveRatio="true" GridPane.columnIndex="3"/>
                </GridPane>
                <ImageView fx:id="heldTile" fitHeight="51.0" fitWidth="49.0" layoutX="35.0"
                           layoutY="28.0" pickOnBounds="true" preserveRatio="true">
                </ImageView>
                <Button fx:id="drawButton" layoutX="24.0" layoutY="89.0" mnemonicParsing="false"
                        onAction="#handleDraw" prefHeight="26.0" prefWidth="73.0" text="Draw"/>
                <Button fx:id="showFaceUpButton" layoutX="213.0" layoutY="88.0" mnemonicParsing="false"
                        onAction="#handleShowFaceUp" text="SHOW"/>
            </Pane>
            <Pane fx:id="pilesPane" layoutX="373.0" layoutY="4.0" prefHeight="126.0" prefWidth="224.0">
                <GridPane fx:id="pilesGrid" layoutX="8.0" layoutY="6.0" prefHeight="111.0"
                          prefWidth="217.0">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0"/>
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                    </rowConstraints>
                    <ImageView fx:id="pile1" fitHeight="101.0" fitWidth="68.0" pickOnBounds="true"
                               preserveRatio="true" GridPane.columnIndex="0">
                        <Image url="@/images/cards/back2.jpg"/>
                    </ImageView>
                    <ImageView fx:id="pile2" fitHeight="101.0" fitWidth="68.0" pickOnBounds="true"
                               preserveRatio="true" GridPane.columnIndex="1">
                        <Image url="@/images/cards/back2.jpg"/>
                    </ImageView>
                    <ImageView fx:id="pile3" fitHeight="101.0" fitWidth="68.0" pickOnBounds="true"
                               preserveRatio="true" GridPane.columnIndex="2">
                        <Image url="@/images/cards/back2.jpg"/>
                    </ImageView>
                </GridPane>
            </Pane>
            <TextArea fx:id="logs" editable="false" layoutX="380.0" layoutY="130.0" prefHeight="215.0"
                      prefWidth="213.0"
                      style="-fx-background-color: rgba(0,0,0,0.5); -fx-border-color: yellow; -fx-border-width: 2px;"/>
            <Button fx:id="timerButton" layoutX="380.0" layoutY="360.0" mnemonicParsing="false"/>
            <Button fx:id="showOtherShipsButton" layoutX="435.0" layoutY="360.0" mnemonicParsing="false"
                    onAction="#viewOther" text="View ships"/>
            <Button fx:id="endButton" layoutX="552.0" layoutY="360.0" mnemonicParsing="false"
                    onAction="#handleEndButtonClick" text="End"/>
            <Button fx:id="fixButton" layoutX="418.0" layoutY="361.0" mnemonicParsing="false"
                    onAction="#handleFixButtonClick" prefHeight="26.0" prefWidth="136.0" text="Fix"
                    visible="false"/>
            <Button fx:id="cheatsButton" layoutX="514.0" layoutY="360.0" mnemonicParsing="false"
                    onAction="#handleCheatsButtonClick" text="C"/>
        </AnchorPane>

        <AnchorPane fx:id="endBuildingScene" managed="false" prefHeight="400.0" prefWidth="600.0"
                    visible="false">
            <Group layoutY="20.0">
                <ImageView fx:id="flightboardImg" fitHeight="400.0" fitWidth="600.0" pickOnBounds="true"
                           preserveRatio="true">
                </ImageView>
                <Polygon fx:id="pos4" fill="#1f93ff00" layoutX="147.0" layoutY="143.0"
                         points="-4.493414878845215, -42.69194412231445, 13.303949356079102, -59.0905647277832, -8.519773483276367, -70.01158142089844"
                         rotate="-17.1" stroke="TRANSPARENT" strokeType="INSIDE"/>
                <Polygon fx:id="pos3" fill="#1f93ff00" layoutX="189.0" layoutY="127.0"
                         points="-4.493414878845215, -42.69194412231445, 13.303949356079102, -59.0905647277832, -8.519773483276367, -70.01158142089844"
                         rotate="-9.9" stroke="TRANSPARENT" strokeType="INSIDE"/>
                <Polygon fx:id="pos2" fill="#1f93ff00" layoutX="276.0" layoutY="112.0"
                         points="-4.493414878845215, -42.69194412231445, 13.303949356079102, -59.0905647277832, -8.519773483276367, -70.01158142089844"
                         rotate="6.7" stroke="TRANSPARENT" strokeType="INSIDE"/>
                <Polygon fx:id="pos1" fill="#1f93ff00" layoutX="410.0" layoutY="130.0"
                         points="-4.493414878845215, -42.69194412231445, 13.303949356079102, -59.0905647277832, -8.519773483276367, -70.01158142089844"
                         rotate="29.7" stroke="TRANSPARENT" strokeType="INSIDE"/>
                <Button fx:id="backToBuildScene" layoutX="483.0" layoutY="336.0" mnemonicParsing="false"
                        onAction="#handleBackButtonClick" prefHeight="26.0" prefWidth="82.0" text="Back"/>
                <Polygon fx:id="pos4_1" fill="#1f93ff00" layoutX="159.0" layoutY="130.0"
                         points="-4.493414878845215, -42.69194412231445, 13.303949356079102, -59.0905647277832, -8.519773483276367, -70.01158142089844"
                         rotate="-14.9" stroke="TRANSPARENT" strokeType="INSIDE"/>
                <Polygon fx:id="pos3_1" fill="#1f93ff00" layoutX="214.0" layoutY="115.0"
                         points="-4.493414878845215, -42.69194412231445, 13.303949356079102, -59.0905647277832, -8.519773483276367, -70.01158142089844"
                         stroke="TRANSPARENT" strokeType="INSIDE"/>
                <Polygon fx:id="pos2_1" fill="#1f93ff00" layoutX="270.0" layoutY="108.0"
                         points="-4.493414878845215, -42.69194412231445, 13.303949356079102, -59.0905647277832, -8.519773483276367, -70.01158142089844"
                         rotate="7.6" stroke="TRANSPARENT" strokeType="INSIDE"/>
                <Polygon fx:id="pos1_1" fill="#1f93ff00" layoutX="383.0" layoutY="115.0"
                         points="-4.493414878845215, -42.69194412231445, 13.303949356079102, -59.0905647277832, -8.519773483276367, -70.01158142089844"
                         rotate="21.8" stroke="TRANSPARENT" strokeType="INSIDE"/>
            </Group>
        </AnchorPane>

    </Group>

    <!-- cheats pop up -->
    <AnchorPane fx:id="cheatsPopup"
                visible="false"
                managed="false"
                style="-fx-background-color: rgba(0, 0, 0, 0.8);">

        <StackPane AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0"
                   AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">

            <VBox spacing="25" alignment="CENTER"
                  prefWidth="600" prefHeight="400"
                  maxWidth="600" maxHeight="400"
                  minWidth="600" minHeight="400"
                  style="-fx-background-color: #301934;
                 -fx-padding: 40;
                 -fx-border-color: #301934;
                 -fx-border-width: 2;
                 -fx-font-size: 24px;">

                <Text text="Choose your cheat:" fill="#cc9900" styleClass="cheats-title"/>

                <Button text="Build ship1" onAction="#onShip1Click"
                        maxWidth="Infinity"
                        style="-fx-padding: 16 24 16 24; -fx-font-size: 24px;"/>

                <Button text="Build ship2" onAction="#onShip2Click"
                        maxWidth="Infinity"
                        style="-fx-padding: 16 24 16 24; -fx-font-size: 24px;"/>

                <Button text="Build ship3" onAction="#onShip3Click"
                        maxWidth="Infinity"
                        style="-fx-padding: 16 24 16 24; -fx-font-size: 24px;"/>

                <Button text="Back" onAction="#handleBackButtonClick"
                        maxWidth="Infinity"
                        style="-fx-padding: 16 24 16 24; -fx-font-size: 24px;"/>

            </VBox>

        </StackPane>
    </AnchorPane>


</StackPane>
